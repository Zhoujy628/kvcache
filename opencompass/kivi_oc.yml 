name: kivi_oc
channels:
  - defaults
  - conda-forge
dependencies:
  - python=3.10
  - pip
  - pytorch=2.1.0
  - torchvision=0.16.0
  - cudatoolkit=12.1   # 或 12.1，取决于集群 CUDA 版本
  - pip:
      # ---- 科学计算 & 数据处理 ----
      - numpy<2.0                # OpenCompass 要求 <2
      - pandas<2.0               # OpenCompass 要求 <2
      - scipy<1.12               # 避免 NumPy ABI 崩溃
      - scikit-learn==1.5.0      # OpenCompass 硬性要求
      - pyarrow<15
      - fsspec<=2023.10.0
      - python-dateutil==2.8.2
      - pytz<2024
      - dill==0.3.7
      - joblib==1.3.2
      - threadpoolctl==3.3.0

      # ---- OpenCompass 依赖 ----
      - httpx==0.27.2
      - datasets==2.16.1
      - evaluate==0.4.1
      - opencompass==0.4.2

      # ---- KIVI requirements ----
      - absl-py==2.0.0
      - accelerate==0.25.0
      - aiofiles==23.2.1
      - aiohttp==3.9.1
      - aiosignal==1.3.1
      - altair==5.2.0
      - annotated-types==0.6.0
      - anyio==4.3.0
      - asttokens==2.4.1
      - async-timeout==4.0.3
      - attributedict==0.3.0
      - attrs==23.2.0
      - bitsandbytes==0.43.0
      - blessings==1.7
      - cachetools==5.3.2
      - certifi==2023.11.17
      - chardet==5.2.0
      - charset-normalizer==3.3.2
      - click==8.1.7
      - codecov==2.1.13
      - colorama==0.4.6
      - coloredlogs==15.0.1
      - contourpy==1.2.0
      - coverage==7.4.0
      - cycler==0.12.1
      - DataProperty==1.0.1
      - decorator==5.1.1
      - deepdiff==6.7.1
      - deepspeed==0.12.6
      - distlib==0.3.8
      - distro==1.9.0
      - einops==0.7.0
      - exceptiongroup==1.2.0
      - executing==2.0.1
      - fastapi==0.110.0
      - ffmpy==0.3.2
      - filelock==3.13.1
      - flash-attn==2.5.6
      - fonttools==4.50.0
      - frozenlist==1.4.1
      - fuzzywuzzy==0.18.0
      - gradio==3.50.2
      - gradio_client==0.6.1
      - h11==0.14.0
      - hjson==3.1.0
      - httpcore==1.0.4
      - loguru==0.7.2
      - portalocker==2.8.2
      - prompt-toolkit==3.0.43
      - protobuf==4.25.1
      - psutil==5.9.7
      - py-cpuinfo==9.0.0
      - pybind11>=2.12
      - pycountry==23.12.11
      - pydantic==1.10.14
      - pydub==0.25.1
      - Pygments==2.17.2
      - pynvml==11.5.0
      - pyparsing==3.1.2
      - pyproject-api==1.6.1
      - pytablewriter==1.2.0
      - six==1.17.0
      - tqdm
      - uvicorn
      - requests
      - setuptools
      - wheel

      # ---- 本地 KIVI 源码 ----
      - -e ./OpenCompass/KIVI